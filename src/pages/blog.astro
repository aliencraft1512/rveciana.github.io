---
import type { MarkdownInstance } from "astro";
import CategoriesList from "../components/CategoriesList.astro";
import PostList from "../components/PostList.astro";
import TagsCloud from "../components/TagsCloud.astro";
import MainLayout from "../layouts/MainLayout.astro";
import type { Frontmatter } from "../model";

const allPosts = await Astro.glob<MarkdownInstance<Frontmatter>>("./*/*.m*d*");
const indexPagePosts = allPosts.sort(
  (a, b) =>
    new Date(b.frontmatter.date).valueOf() -
    new Date(a.frontmatter.date).valueOf()
);
---

<MainLayout
  title="Blog"
  description={`Welcome to GeoExamples, maps, javascript, python and more.`}
>
  <CategoriesList posts={indexPagePosts} />
  <TagsCloud posts={indexPagePosts} />

  <PostList posts={indexPagePosts} />
</MainLayout>
